# [RAG Startup Matchmaker](https://founder-matchmaker.streamlit.app/)
This project implements a Retrieval-Augmented Generation (RAG) system to match natural language queries (e.g., "Find a seed stage founder in London working on healthtech") against a database of synthetic founder profiles.

## 1. Goal
To build a system that finds and explains the top 3-5 best founder matches from a synthetic dataset based on a natural language query, providing clear reasoning and provenance for the match.

## 2. Local Setup and Execution
### Prerequisites: 

1.  Python 3.12
2.  A Google Gemini API Key.

### Clone the Repository:
git clone `https://github.com/Tuba03/rag_app/`

### Set Up Environment:
```bash
python -m venv venv

source venv/bin/activate  # On Windows: venv\Scripts\activate

pip install -r requirements.txt
```

### Generate Data and Index:
Run the setup script, which automatically creates the directories, generates people.csv, stores metadata in people.sqlite, and builds the chroma_db vector store.
`python setup_streamlit.py`

**Configure API Key:**
    Create the `.streamlit` directory and the `secrets.toml` file.
    
```bash
    mkdir -p .streamlit
    # Create the file and add your key
    echo 'GEMINI_API_KEY = "your_key_here"' > .streamlit/secrets.toml
```
    
**Generate and Index Data (The Build Step):**
    Run the scripts to create the 700-row dataset and build the vector index.
    
 ```bash
    # 1. Generate 700 rows of synthetic data/people.csv
    python backend/data_generator.py
    # 2. Embed the data into ChromaDB and store metadata in SQLite
    python backend/indexing.py
 ```
* Wait for the indexing script to complete.

### Run the Streamlit App (Frontend):

`streamlit run streamlit_app.py`
    The app will open in your browser (usually `http://localhost:8501`).

Run the FastAPI App (Backend - Optional/Separate Deployment):

If running the FastAPI backend separately:
`uvicorn backend.main:app --reload --host 0.0.0.0 --port 8000`

## 3. Dataset Snippet
The `data_generator.py` script creates 700 rows of synthetic data.

This snippet shows the first 12 rows generated by `data_generator.py` to illustrate the data variety.

| ID (Snippet) | Founder Name | Role | Company | Idea | Keywords | Stage | Location |
| :---: | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| `0d0e13c8...` | **Andrew Foster** | Founder | Smith, Johnson and Taylor | A cutting-edge **fintech** platform that uses **AI** to optimize ... | fintech, AI, saas | **seed** | San Francisco, USA |
| `79a8e0f1...` | **Stephanie Hill** | Investor | Baker-King | A cutting-edge **healthtech** platform that uses **ML** to optimize ... | healthtech, AI, marketplace | **series A** | London, UK |
| `d5a639b2...` | **Jason White** | Co-founder | Miller Group | A cutting-edge **saas** platform that uses **blockchain** to optimize ... | saas, devtools, AI | **growth** | New York, USA |
| `f1e2d3c4...` | **Emily Brown** | Engineer | TechCorp | A social platform for connecting local artisans and consumers. ... | social, e-commerce, foodtech | **pre-seed** | Berlin, Germany |
| `8b7a6c5d...` | **Michael Lee** | PM | Alpha Ventures | **AI**-powered legal documentation assistant for small businesses. ... | AI, saas, fintech | none | Bangalore, India |
| `3c4d5e6f...` | **Sarah Chen** | Founder | Quantum Leap | An **edtech** solution utilizing gamified learning paths for STEM. ... | edtech, AI, devtools | **seed** | Singapore, Singapore |
| `1a2b3c4d...` | **David Kim** | Co-founder | Innovate Now | A marketplace for trading certified **cleantech** carbon credits. ... | cleantech, marketplace | **series A** | Toronto, Canada |
| `5e6f7a8b...` | **Jessica Rodriguez** | Investor | Global Connect | **Biotech** research tool using computational genomics for drug ... | biotech, AI, healthtech | **growth** | Paris, France |
| `9c0d1e2f...` | **Robert Davis** | Other | DataStream | Enterprise **cybersecurity** platform with decentralized identity ... | cybersecurity, blockchain | **pre-seed** | San Francisco, USA |
| `4g5h6i7j...` | **Laura Wilson** | Founder | NextGen Robotics | Modular **robotics** kits for educational and small business use. ... | robotics, devtools | none | London, UK |
| `k1l2m3n4...` | **Alex Wong** | Engineer | FinSecure | A cutting-edge **fintech** platform that uses **ML** to optimize ... | fintech, AI, saas | **seed** | New York, USA |
| `5o6p7q8r...` | **Maria Garcia** | PM | EcoHarvest | **Agritech** sensor network for real-time soil and crop analysis. ... | agritech, cleantech | **series A** | Bangalore, India |

*(Note: Data is synthetic and truncated for display purposes.)*

## 4. Design Note
### RAG Startup Matchmaker: Design & Architecture
### A. Architecture and Stack
| Component	| Technology	| Purpose |
| :---: | :--- | :--- |
| **Frontend/Demo**	| **Streamlit** (Python)	| Provides a fast, interactive UI for the RAG search. Directly calls the RAGService instance. | 
| **RAG Service**	| **LangChain** (RAG Orchestration)	| Manages the full RAG pipeline: retrieval, context formatting, and generation. |
| **LLM**	| **Google Gemini** (gemini-2.5-flash)	| Generates the final ranked list and the match explanation for each retrieved document. |
| **Vector Store**	| **ChromaDB**	| Stores the vector embeddings of founder profiles, supporting fast similarity search. |
| **Embeddings**	| **Sentence-Transformers** (all-MiniLM-L6-v2)	| Local, open-source model used to create vector embeddings from profile text. |
| **Metadata Store**	| **sqlite-utils**	| Stores the full, un-embedded founder records (`people.sqlite`) for final result lookup (provenance). |

### B. Dataset Creation
The dataset was synthetically generated using the **Faker** library and a set of predefined lists for `ROLES`, `STAGES`, `LOCATIONS`, and `KEYWORDS_POOL`.

1. **Quality Injection:** 15% of the 700 rows were intentionally given higher-quality, longer idea and about fields, and assigned to a later `stage` (`seed`, `series A`, `growth`). This was done to ensure the RAG system has rich, distinct content to retrieve and to allow for targeted searches (e.g., finding a "growth stage founder").

2. **Structure:** The data includes 12 columns, fulfilling all requirements (e.g., `id`, `stage`, `location`, `idea`, `about`, `keywords`).


### C. Indexing and RAG Composition
**1. Indexing (`indexing.py`):**

- The CSV is loaded into a Pandas DataFrame.
`
- The full dataset is inserted into a local **SQLite** database (`people.sqlite`) for fast lookup of all metadata columns (provenance).

- For the vector store, all relevant text fields (`founder_name`, `role`, `company`, `location`, `idea`, `about`, `keywords`, `stage`) are concatenated into a single **LangChain** `Document`'s `page_content`.

- **CRITICAL Metadata:** The stage and location fields are explicitly stored in the document's metadata dictionary. This is essential for the pre-retrieval filtering step.

- The documents are embedded using `all-MiniLM-L6-v2` and stored in ChromaDB.

**2. RAG Composition (`llm_service.py`):**

**Pre-Retrieval Filtering (Hybrid Search):** Before the semantic search, the `_extract_stage_filter` and `_parse_location` methods use regex to extract hard constraints (e.g., "seed stage" or "London") from the user query. 

This is converted into a **ChromaDB** `where` **filter** and passed to `vectorstore.similarity_search_with_score(..., filter=chroma_filter_arg)`. 

This ensures that only profiles matching the hard criteria are even considered by the LLM, dramatically improving relevance.

**Generation (LLM Ranking):** The top 10 documents after filtering are passed to the Gemini LLM via a `ChatPromptTemplate`. The prompt instructs the LLM to act as a ranker/matchmaker, select the TOP 5 best matches, generate a concise `match_explanation`, and output a specific **JSON array format** containing the `csv_id` for provenance.

**Post-Processing & Provenance:** The JSON output is parsed. For each matched `csv_id`, the full record is fetched from **SQLite**. The final result object is constructed, ensuring the required fields (including the LLM-generated explanation and the **provenance field** `matched_on_fields`) are present.

### D. Edge Cases Considered
| Edge Case | 	Handling Strategy |
| :---: | :--- |
| Empty/Invalid Query |	Handled by a FastAPI/Streamlit check, returning a 400 error or an information message. |
| Query with Hard Filters |	Handled by Pre-Retrieval Filtering in `llm_service.py` (stage/location regex extraction). If the filter is present, the vector search is constrained, ensuring high-precision results. |
| Query with NO Matches |	If the vector store returns an empty set (e.g., after filtering), the function returns []. If the LLM receives context but ranks none as good, it is instructed to return []. |
| LLM Hallucination/Bad Format |	The prompt forces a specific JSON array structure. The `llm_service.py` includes robust string stripping and a json.loads block with error handling to prevent server crashes from malformed LLM output. |
| Quick Query/Input Reset |	The Streamlit app uses a state management callback (`set_query_value_and_key`) and a dynamic key for the text input to ensure button clicks correctly update the input box and trigger a new search. |


